---
title: caddy配置反向代理和ssl证书申请
date: 2025-07-31T00:29:00+08:00
lastmod: 2025-07-31T00:29:00+08:00
draft: false
categories: 
- 电脑网络

tags: 
- caddy

description: 
slug: caddypei-zhi-fan-xiang-dai-li-he-sslzheng-shu-shen-qing
aliases: 
- /archives/caddypei-zhi-fan-xiang-dai-li-he-sslzheng-shu-shen-qing

---

\n## 下载Caddy\n\n\ncaddy官网下载地址[https://caddyserver.com/download](https://caddyserver.com/download)。也可以直接[点此](https://caddyserver.com/api/download?os=linux&arch=amd64&idempotency=66521145474724)下载linux amd64版本。\n\n\n如果是需要申请泛域名证书则需要勾选对应dns提供商的插件，比如cloudflare\n\n\n注意：cloudflare不再支持.cf, .ga, .gq, .ml,  .tk后缀域名使用api管理dns，也就是这些后缀的域名是不能通过cloudflare申请泛域名证书。\n\n\n下载之后重命名为caddy拷贝到/usr/local/bin下即可。\n\n\n\n\n\n## 配置文件Caddyfile\n\n\n在任意目录新建一个文件Caddyfile, 推荐位置为/etc/caddy/Caddyfile\n\n\n输入以下内容， 表示将www.mydomain.cf转发到localhost:16325,并且自动通过let's encrypt申请ssl证书，申请邮箱为my@qq.com.  开启tls则会默认把http重定向到https\n\n\n```\n`www.mydomain.cf {
}`\n```\n\n启动caddy\n\n\n运行以下命令即可让caddy进入后台运行。其中/etc/caddy/Caddyfile是配置文件Caddyfile所在路径，--dapter caddyfile表示指定配置文件适配器为caddyfile格式，默认是json，caddyfile也可以翻译为json.\n\n\n如caddy adapt --config /etc/caddy/caddyfile > /etc/caddy/file.json就是将caddyfile翻译为json并输出，然后caddy start的config参数指定为json文件即可。\n\n\n```\n`caddy start --config /etc/caddy/Caddyfile --adapter caddyfile`\n```\n\ncaddy start是后台启动，但是日志会在当前控制台输出，关闭当前控制台也会继续运行\n\n\ncaddy run是前台启动，当前控制台关闭进程也会关闭\n\n\n二者参数一致\n\n\n## 添加到systemd运行\n\n\n新建文件/usr/lib/systemd/system/caddy.service(centos)或者/etc/systemd/system/caddy.service(ubuntu)，内容如下. 记得将User=my中my修改为有权限的用户名。\n\n\n```\n`[Unit]
systemctl status caddy.service`\n```\n\n \n\n\n## 添加开机自启\n\n\n```\n`systemctl daemon-reload #激活你的systemd服务单元
systemctl enable caddy.service #启用设置好的服务
systemctl is-enabled caddy.service #测试是否设置成功`\n```\n\n\n\n
\n