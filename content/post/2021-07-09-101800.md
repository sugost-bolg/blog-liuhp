---
title: Centos 7-8 通过snap安装配置shadowsocks-libev
date: 2021-07-09T10:18:00+08:00
lastmod: 2021-07-09T10:18:00+08:00
draft: false
categories: 
- 电脑网络

tags: []
description: 
slug: 146
aliases: 
- /archives/146

---

\n1、安装和启用EPEL Repository\n\n
\n```\n`yum install epel-release -y
`\n```\n
\n2、安装snap
通过snap来安装应用可以运行在单独的环境不影响主机系统。\n\n
\n```\n`yum install snapd
`\n```\n
\n添加snap启动通信 socket\n\n
\n```\n`systemctl enable --now snapd.socket
`\n```\n
\n创建链接（snap软件包一般安装在/snap目录下）\n\n
\n```\n`ln -s /var/lib/snapd/snap /snap
`\n```\n
\n3、安装shadowsocks-libev稳定版\n\n
\n```\n`snap install shadowsocks-libev
`\n```\n
\n4、建立shadowsocks-libev配置文件\n\n
\n```\n`vim /snap/bin/config.json
`\n```\n
\n注意：配置文件位置变了，不同于直接安装时 /etc/shadowsocks/config.json\n\n
\n输入以下内容：\n\n
\n```\n`{
"server": "0.0.0.0",
"nameserver": "8.8.8.8",
"server\_port": 10808,
"password": "hk123456",
"method": "chacha20-ietf-poly1305",
"timeout": 600,
"no\_delay": true,
"mode": "tcp\_and\_udp",
"plugin": "",
"plugin\_opts": ""
}
`\n```\n
\n5、建立shadowsocks-libev的service单元配置文件\n\n
\n```\n`vim /lib/systemd/system/ss.service
`\n```\n
\n输入以下内容：\n\n
\n```\n`[Unit]
Description=Shadowsocks Server
After=network.target

[Service]
Restart=on-abnormal
ExecStart=/snap/bin/shadowsocks-libev.ss-server -c /snap/bin/config.json > /dev/null 2>&1

[Install]
WantedBy=multi-user.target
`\n```\n
\n6、设置开机启动shadowsocks-libev\n\n
\n```\n`systemctl daemon-reload
systemctl start ss.service
systemctl enable ss.service
`\n```\n
\n1. 防火墙开放shadowsocks-libev服务端口：
firewall-cmd --permanent --add-port=自定义服务端口/tcp
firewall-cmd --permanent --add-port=自定义服务端口/udp
firewall-cmd --reload\n2. 常用操作
停止shadowsocks-libev服务
systemctl stop ss.service\n
\n取消shadowsocks-libev开机自启\n\n
\n```\n`systemctl disable ss.service
`\n```\n
\n升级shadowsocks-libev版本\n\n
\n```\n`snap refresh shadowsocks-libev
`\n```\n
\n移除shadowsocks-libev应用（还需要手工清理上文第四节第五节涉及的配置文件）\n\n
\n```\n`snap remove shadowsocks-libev
`\n```\n
\n