---
title: 亚马逊AWS EC2上使用root用户登录-远离秘钥
date: 2022-10-09T15:38:03+08:00
lastmod: 2022-10-09T15:38:03+08:00
draft: false
categories: 
- 电脑网络

tags: []
description: 
slug: 199
aliases: 
- /archives/199

---

\naws ec2默认是使用ec2-user账号登陆的，对很多文件夹是没有权限的。如何使用root账号执行命令就是一个问题了。解决办法如下：\n\n
\n1.根据官网提供的方法登录连接到EC2服务器（官网推荐windows用户使用PUTTY连接）\n\n
\n主机：是服务器的Public DNS\n\n
\n端口：22\n\n
\n2.创建root的密码，输入如下命令：\n\n
\nsudo passwd root\n\n
\n3.然后会提示你输入new password。输入一个你要设置的root的密码，需要你再输入一遍进行验证。\n\n
\n4.接下来，切换到root身份，输入如下命令：\n\n
\nsu root\n\n
\n5.使用root身份编辑亚马逊云主机的ssh登录方式，找到 PasswordAuthentication no，把no改成yes。输入：\n\n
\nvim /etc/ssh/sshd_config\n\n
\n6.接下来，要重新启动下sshd，如下命令：\n\n
\nsudo /sbin/service sshd restart\n\n
\n7.然后再切换到root身份\n\n
\nsu root\n\n
\n8.再为原来的”ec2-user”添加登录密码。如下命令：\n\n
\npasswd ec2-user\n\n
\n按提示，两次输入密码。\n\n
\n9.修改sshd配置文件\n\n
\nvi /etc/ssh/sshd_config\n\n
\nPermitRootLogin这行改为\n\n
\nPermitRootLogin yes\n\n
\nPasswordAuthentication no改为\n\n
\nPasswordAuthentication yes\n\n
\nUsePAM yes改为\n\n
\nUsePAM no\n\n
\n