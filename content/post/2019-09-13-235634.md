---
title: Centos7 禁止ping的几种方式
date: 2019-09-13T23:56:34+08:00
lastmod: 2019-09-13T23:56:34+08:00
draft: false
categories: 
- 电脑网络

tags: []
description: 
slug: 31
aliases: 
- /archives/31

---

\n临时禁ping
将/proc/sys/net/ipv4/icmp_echo_ignore_all文件里面的0临时改为1，从而实现禁止ICMP报文的所有请求，达到禁止Ping的效果，网络中的其他主机Ping该主机时会显示“请求超时”，但该服务器此时是可以Ping其他主机的。\n\n
\n#禁ping\n\n
\n```\n`echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all
`\n```\n
\n#启用ping\n\n
\n```\n`echo 0 > /proc/sys/net/ipv4/icmp_echo_ignore_all
`\n```\n
\n永久禁ping
#编辑配置
vim /etc/sysctl.conf
#设置禁ping（如果有此配置就无需重复添加，仅更新值即可）\n\n
\n```\n`net.ipv4.icmp_echo_ignore_all = 1
`\n```\n
\n#刷新配置
sysctl -p\n\n
\n#启用ping\n\n
\n```\n`net.ipv4.icmp_echo_ignore_all = 0
`\n```\n
\nIPTABLES防火墙禁ping
置禁ping\n\n
\n```\n`iptables -A INPUT -p icmp --icmp-type 8 -s 0/0 -j DROP
`\n```\n
\n启用ping\n\n
\n```\n`iptables -D INPUT -p icmp --icmp-type 8 -s 0/0 -j DROP
`\n```\n
\n#参数备注
-A：添加防火墙规则.
INPUT：入站规则.
-p icmp：指定包检查的协议为ICMP协议.
--icmp-type 8：指定ICMP类型为8.
-s：指定IP和掩码，“0/0”表示此规则针对所有IP和掩码.
-j：指定目标规则，即包匹配则应到做什么，"DROP"表示丢弃.
注意事项
通过修改配置方式禁止ping后，内部ping也将失效，通过防火墙方式禁止ping后，可以ping自己内部网络。\n\n
\n