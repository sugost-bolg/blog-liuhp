---
title: "在debian系统里如何让python代码在后台运行？"
date: 2025-10-15T03:40:08.465069685Z
slug: f86494b1-74e2-415f-9247-266cb6fcba4c
draft: true
---

[{"source":{"position":0,"lines":["<p style=\"\">下面给出完整的 systemd unit 文件内容和常用命令。</p><p style=\"\">Unit 文件（/etc/systemd/system/btc_trade_strategy.service）</p><h2 style=\"\" id=\"%E5%B0%86%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%B9%B6%E8%BD%BD%E5%85%A5-systemd%EF%BC%9A\">将文件写入并载入 systemd：</h2><p style=\"\">Code</p><pre><code>[Unit]","Description=btc_trade_strategy Python service"]},"target":{"position":0,"lines":["<p style=\"\">在 root 下添加为开机自启（使用 systemd，服务以 root 身份运行）。将下面内容写入 /etc/systemd/system/liu_btc_trade_strategy.service 并启用：</p><ol><li><p style=\"\">创建 unit 文件：</p></li></ol><p style=\"\">Code</p><pre><code>sudo tee /etc/systemd/system/liu_btc_trade_strategy.service &gt; /dev/null &lt;&lt;'EOF'","[Unit]","Description=liu_btc_trade_strategy Python service (run as root)"]},"type":"CHANGE"},{"source":{"position":8,"lines":["ExecStart=/usr/bin/python3 /home/liu/btc_trade_strategy.py"]},"target":{"position":9,"lines":["ExecStart=/usr/bin/python3 /home/liu/liu_btc_trade_strategy.py"]},"type":"CHANGE"},{"source":{"position":15,"lines":["</code></pre><pre><code>","sudo systemctl daemon-reload","</code></pre><p style=\"\"></p><h2 style=\"\" id=\"%E5%90%AF%E5%8A%A8%E5%B9%B6%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%EF%BC%9A\">启动并设置开机自启：</h2><p style=\"\">Code</p><pre><code>sudo systemctl enable --now btc_trade_strategy.service","</code></pre><h2 style=\"\" id=\"%E6%9F%A5%E7%9C%8B%E7%8A%B6%E6%80%81%EF%BC%9A\">查看状态：</h2><p style=\"\">Code</p><pre><code>sudo systemctl status btc_trade_strategy.service","sudo journalctl -u btc_trade_strategy.service -f","</code></pre><h2 style=\"\" id=\"%E5%81%9C%E6%AD%A2%E3%80%81%E9%87%8D%E5%90%AF%EF%BC%9A\">停止、重启：</h2><p style=\"\">Code</p><pre><code>sudo systemctl stop btc_trade_strategy.service","sudo systemctl restart btc_trade_strategy.service","</code></pre><p style=\"\"></p>"]},"target":{"position":16,"lines":["EOF","</code></pre><ol start=\"2\"><li><p style=\"\">载入并启用（并立即启动）：</p></li></ol><p style=\"\">Code</p><pre><code>sudo systemctl daemon-reload","sudo systemctl enable --now liu_btc_trade_strategy.service","</code></pre><ol start=\"3\"><li><p style=\"\">管理与查看：</p></li></ol><p style=\"\">Code</p><pre><code>sudo systemctl status liu_btc_trade_strategy.service","sudo journalctl -u liu_btc_trade_strategy.service -f","sudo systemctl stop liu_btc_trade_strategy.service","sudo systemctl disable liu_btc_trade_strategy.service","</code></pre><p style=\"\">注意：</p><ul><li><p style=\"\">确认 /home/liu/liu_btc_trade_strategy.py 可被 root 读取并可运行（通常 root 有权限）。</p></li><li><p style=\"\">若脚本需虚拟环境或特定 PATH，把 ExecStart 改为该虚拟环境的 python 路径。</p></li></ul><p style=\"\"><s>=========================================================================</s></p><p style=\"\">在 root 下添加为开机自启（使用 systemd，服务以 root 身份运行）。将下面内容写入 /etc/systemd/system/yang_btc_trade_strategy.service 并启用：</p><ol><li><p style=\"\">创建 unit 文件：</p></li></ol><p style=\"\">Code</p><pre><code>sudo tee /etc/systemd/system/yang_btc_trade_strategy.service &gt; /dev/null &lt;&lt;'EOF'","[Unit]","Description=yang_btc_trade_strategy Python service (run as root)","After=network.target","","[Service]","Type=simple","User=root","WorkingDirectory=/home/yang","ExecStart=/usr/bin/python3 /home/yang/yang_btc_trade_strategy.py","Restart=always","RestartSec=5","Environment=PYTHONUNBUFFERED=1","","[Install]","WantedBy=multi-user.target","EOF","</code></pre><ol start=\"2\"><li><p style=\"\">载入并启用（并立即启动）：</p></li></ol><p style=\"\">Code</p><pre><code>sudo systemctl daemon-reload","sudo systemctl enable --now yang_btc_trade_strategy.service","</code></pre><ol start=\"3\"><li><p style=\"\">管理与查看：</p></li></ol><p style=\"\">Code</p><pre><code>sudo systemctl status yang_btc_trade_strategy.service","sudo journalctl -u yang_btc_trade_strategy.service -f","sudo systemctl stop yang_btc_trade_strategy.service","sudo systemctl disable yang_btc_trade_strategy.service","</code></pre><p style=\"\">注意：</p><ul><li><p style=\"\">确认 /home/yang/yang_btc_trade_strategy.py 可被 root 读取并可运行（通常 root 有权限）。</p></li><li><p style=\"\">若脚本需虚拟环境或特定 PATH，把 ExecStart 改为该虚拟环境的 python 路径。</p></li></ul><p style=\"\"></p>"]},"type":"CHANGE"}]