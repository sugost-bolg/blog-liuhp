---
title: "caddy配置反向代理和ssl证书申请"
date: 2025-07-30T16:29:00+0000
slug: caddypei-zhi-fan-xiang-dai-li-he-sslzheng-shu-shen-qing
tags:
  - caddy
categories:
  - 电脑网络
---

[{"source":{"position":0,"lines":["<p style=\"\">caddy官网下载地址<a href=\"https://caddyserver.com/download\" target=\"_blank\" rel=\"noopener nofollow\">https://caddyserver.com/download</a>。也可以直接<a href=\"https://caddyserver.com/api/download?os=linux&amp;arch=amd64&amp;idempotency=66521145474724\" target=\"_blank\" rel=\"noopener nofollow\">点此</a>下载linux amd64版本。</p><p style=\"\">如果是需要申请泛域名证书则需要勾选对应dns提供商的插件，比如cloudflare</p><p style=\"\">注意：cloudflare不再支持.cf, .ga, .gq, .ml,&nbsp; .tk后缀域名使用api管理dns，也就是这些后缀的域名是不能通过cloudflare申请泛域名证书。</p><p style=\"\">下载之后重命名为caddy拷贝到/usr/local/bin下即可。</p><p style=\"\"></p><h1 style=\"\" id=\"%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6caddyfile\">配置文件Caddyfile</h1><p style=\"\">在任意目录新建一个文件Caddyfile, 推荐位置为/etc/caddy/Caddyfile</p><p style=\"\">输入以下内容， 表示将www.mydomain.cf转发到localhost:16325,并且自动通过let's encrypt申请ssl证书，申请邮箱为my@qq.com.&nbsp; 开启tls则会默认把http重定向到https</p><pre><code>www.mydomain.cf {"]},"target":{"position":0,"lines":["<h2 style=\"\" id=\"%E4%B8%8B%E8%BD%BDcaddy\">下载Caddy</h2><p style=\"\">caddy官网下载地址<a href=\"https://caddyserver.com/download\" target=\"_blank\" rel=\"noopener nofollow\">https://caddyserver.com/download</a>。也可以直接<a href=\"https://caddyserver.com/api/download?os=linux&amp;arch=amd64&amp;idempotency=66521145474724\" target=\"_blank\" rel=\"noopener nofollow\">点此</a>下载linux amd64版本。</p><p style=\"\">如果是需要申请泛域名证书则需要勾选对应dns提供商的插件，比如cloudflare</p><p style=\"\">注意：cloudflare不再支持.cf, .ga, .gq, .ml,&nbsp; .tk后缀域名使用api管理dns，也就是这些后缀的域名是不能通过cloudflare申请泛域名证书。</p><p style=\"\">下载之后重命名为caddy拷贝到/usr/local/bin下即可。</p><p style=\"\"></p><h2 style=\"\" id=\"%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6caddyfile\">配置文件Caddyfile</h2><p style=\"\">在任意目录新建一个文件Caddyfile, 推荐位置为/etc/caddy/Caddyfile</p><p style=\"\">输入以下内容， 表示将www.mydomain.cf转发到localhost:16325,并且自动通过let's encrypt申请ssl证书，申请邮箱为my@qq.com.&nbsp; 开启tls则会默认把http重定向到https</p><pre><code>www.mydomain.cf {"]},"type":"CHANGE"},{"source":{"position":10,"lines":["}</code></pre><p style=\"\">启动caddy</p><p style=\"\">运行以下命令即可让caddy进入后台运行。其中/etc/caddy/Caddyfile是配置文件Caddyfile所在路径，--dapter caddyfile表示指定配置文件适配器为caddyfile格式，默认是json，caddyfile也可以翻译为json.</p><p style=\"\">如caddy adapt --config /etc/caddy/caddyfile &gt; /etc/caddy/file.json就是将caddyfile翻译为json并输出，然后caddy start的config参数指定为json文件即可。</p><pre><code>caddy start --config /etc/caddy/Caddyfile --adapter caddyfile</code></pre><p style=\"\">caddy start是后台启动，但是日志会在当前控制台输出，关闭当前控制台也会继续运行</p><p style=\"\">caddy run是前台启动，当前控制台关闭进程也会关闭</p><p style=\"\">二者参数一致</p><h1 style=\"\" id=\"%E6%B7%BB%E5%8A%A0%E5%88%B0systemd%E8%BF%90%E8%A1%8C\">添加到systemd运行</h1><p style=\"\">新建文件/usr/lib/systemd/system/caddy.service(centos)或者/etc/systemd/system/caddy.service(ubuntu)，内容如下. 记得将User=my中my修改为有权限的用户名。</p><pre><code>[Unit]"]},"target":{"position":10,"lines":["}</code></pre><p style=\"\">启动caddy</p><p style=\"\">运行以下命令即可让caddy进入后台运行。其中/etc/caddy/Caddyfile是配置文件Caddyfile所在路径，--dapter caddyfile表示指定配置文件适配器为caddyfile格式，默认是json，caddyfile也可以翻译为json.</p><p style=\"\">如caddy adapt --config /etc/caddy/caddyfile &gt; /etc/caddy/file.json就是将caddyfile翻译为json并输出，然后caddy start的config参数指定为json文件即可。</p><pre><code>caddy start --config /etc/caddy/Caddyfile --adapter caddyfile</code></pre><p style=\"\">caddy start是后台启动，但是日志会在当前控制台输出，关闭当前控制台也会继续运行</p><p style=\"\">caddy run是前台启动，当前控制台关闭进程也会关闭</p><p style=\"\">二者参数一致</p><h2 style=\"\" id=\"%E6%B7%BB%E5%8A%A0%E5%88%B0systemd%E8%BF%90%E8%A1%8C\">添加到systemd运行</h2><p style=\"\">新建文件/usr/lib/systemd/system/caddy.service(centos)或者/etc/systemd/system/caddy.service(ubuntu)，内容如下. 记得将User=my中my修改为有权限的用户名。</p><pre><code>[Unit]"]},"type":"CHANGE"},{"source":{"position":29,"lines":["systemctl status caddy.service</code></pre><p style=\"\">&nbsp;</p><p style=\"\"></p>"]},"target":{"position":29,"lines":["systemctl status caddy.service</code></pre><p style=\"\">&nbsp;</p><h2 style=\"\" id=\"%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF\">添加开机自启</h2><pre><code>systemctl daemon-reload #激活你的systemd服务单元","systemctl enable caddy.service #启用设置好的服务","systemctl is-enabled caddy.service #测试是否设置成功</code></pre><p style=\"\"></p>"]},"type":"CHANGE"}]